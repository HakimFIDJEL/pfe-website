"use client";

import { useState, useEffect } from "react";
import Link from "next/link";
import { useTheme } from "next-themes";
import { Moon, Sun, Github, Mail } from "lucide-react";

import { Button } from "@/components/ui/button";
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "@/components/ui/tooltip";

export function Header() {
  const [mounted, setMounted] = useState(false);
  const { theme, setTheme } = useTheme();

  useEffect(() => setMounted(true), []);

  return (
    <header className="fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b  border-border">
      <div className="container mx-auto px-4 sm:px-6 lg:px-8 border-l border-r border-border">
        <div className="flex items-center justify-between h-16">
          <div className="flex items-center">
            {/* Logo */}
            <Link href="#top" className="flex items-center">
              {theme === "dark" ? (
                <svg
                  width="138"
                  height="32"
                  viewBox="0 0 138 32"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  className="py-1"
                >
                  <path
                    d="M31.3984 15.0623V25.3902H27.281V1.88852H31.3074V10.759H31.5121C31.9216 9.76448 32.5547 8.98033 33.4116 8.40656C34.276 7.82514 35.3755 7.53443 36.71 7.53443C37.9232 7.53443 38.981 7.79071 39.8833 8.30328C40.7856 8.81585 41.4832 9.56557 41.9761 10.5525C42.4765 11.5393 42.7268 12.7443 42.7268 14.1672V25.3902H38.6094V14.8098C38.6094 13.624 38.3061 12.7022 37.6995 12.0443C37.1005 11.3787 36.2588 11.0459 35.1745 11.0459C34.4466 11.0459 33.7945 11.2066 33.2182 11.5279C32.6495 11.8415 32.2021 12.2967 31.8761 12.8934C31.5576 13.4902 31.3984 14.2131 31.3984 15.0623Z"
                    fill="white"
                  />
                  <path
                    d="M48.8573 32C48.2962 32 47.7768 31.9541 47.2991 31.8623C46.8289 31.7781 46.4536 31.6787 46.173 31.5639L47.1284 28.3279C47.7275 28.5038 48.262 28.588 48.7322 28.5803C49.2023 28.5727 49.6155 28.4235 49.9719 28.1328C50.3359 27.8497 50.643 27.3754 50.8932 26.7098L51.2458 25.7574L44.9105 7.76393H49.2781L53.3045 21.0754H53.4864L57.5242 7.76393H61.9031L54.9082 27.5246C54.5821 28.4579 54.1499 29.2574 53.6116 29.923C53.0732 30.5962 52.4135 31.1087 51.6325 31.4607C50.8591 31.8202 49.934 32 48.8573 32Z"
                    fill="white"
                  />
                  <path
                    d="M68.8696 1.88852V25.3902H64.7523V1.88852H68.8696Z"
                    fill="white"
                  />
                  <path
                    d="M81.8273 7.76393V10.977H71.7842V7.76393H81.8273ZM74.2637 3.54098H78.381V20.0885C78.381 20.647 78.4644 21.0754 78.6312 21.3738C78.8056 21.6645 79.0331 21.8634 79.3137 21.9705C79.5942 22.0776 79.9051 22.1311 80.2463 22.1311C80.5041 22.1311 80.7392 22.112 80.9515 22.0738C81.1714 22.0355 81.3382 22.0011 81.452 21.9705L82.1458 25.218C81.9259 25.2945 81.6112 25.3787 81.2017 25.4705C80.7999 25.5623 80.307 25.6158 79.7231 25.6311C78.6919 25.6618 77.763 25.5049 76.9365 25.1607C76.11 24.8087 75.4541 24.2656 74.9688 23.5311C74.4911 22.7967 74.2561 21.8787 74.2637 20.777V3.54098Z"
                    fill="white"
                  />
                  <path
                    d="M92.8173 25.7344C91.0657 25.7344 89.553 25.3672 88.2791 24.6328C87.0128 23.8907 86.0385 22.8426 85.356 21.4885C84.6736 20.1268 84.3324 18.524 84.3324 16.6803C84.3324 14.8672 84.6736 13.276 85.356 11.9066C86.046 10.5295 87.009 9.45847 88.245 8.69344C89.481 7.92076 90.933 7.53443 92.6012 7.53443C93.6779 7.53443 94.694 7.71038 95.6494 8.06229C96.6124 8.40656 97.4616 8.94208 98.1971 9.66885C98.9402 10.3956 99.5241 11.3213 99.9487 12.4459C100.373 13.5628 100.586 14.894 100.586 16.4393V17.7131H86.2659V14.9131H96.6389C96.6313 14.1175 96.4607 13.4098 96.1271 12.7902C95.7935 12.1628 95.3271 11.6694 94.7281 11.3098C94.1367 10.9503 93.4466 10.7705 92.6581 10.7705C91.8164 10.7705 91.0771 10.977 90.4402 11.3902C89.8032 11.7956 89.3066 12.3311 88.9502 12.9967C88.6014 13.6546 88.4232 14.3776 88.4156 15.1656V17.6098C88.4156 18.635 88.6014 19.5148 88.9729 20.2492C89.3445 20.976 89.8639 21.5344 90.5311 21.9246C91.1984 22.3071 91.9794 22.4984 92.8742 22.4984C93.4732 22.4984 94.0154 22.4142 94.5006 22.2459C94.9859 22.0699 95.4067 21.8137 95.7631 21.477C96.1195 21.1404 96.3887 20.7235 96.5707 20.2262L100.415 20.6623C100.172 21.6874 99.7099 22.5825 99.0274 23.3475C98.3526 24.1049 97.4882 24.694 96.4342 25.1148C95.3802 25.5279 94.1746 25.7344 92.8173 25.7344Z"
                    fill="white"
                  />
                  <path
                    d="M111.689 25.7344C109.945 25.7344 108.448 25.3481 107.197 24.5754C105.953 23.8027 104.994 22.7355 104.319 21.3738C103.652 20.0044 103.318 18.4284 103.318 16.6459C103.318 14.8557 103.659 13.276 104.342 11.9066C105.024 10.5295 105.987 9.45847 107.231 8.69344C108.482 7.92076 109.961 7.53443 111.667 7.53443C113.085 7.53443 114.34 7.79836 115.431 8.32623C116.531 8.84645 117.407 9.5847 118.059 10.541C118.711 11.4896 119.082 12.5989 119.173 13.8689H115.238C115.079 13.0197 114.7 12.312 114.101 11.7459C113.509 11.1721 112.717 10.8852 111.724 10.8852C110.882 10.8852 110.143 11.1148 109.506 11.5738C108.869 12.0251 108.372 12.6754 108.016 13.5246C107.667 14.3738 107.492 15.3913 107.492 16.577C107.492 17.7781 107.667 18.8109 108.016 19.6754C108.364 20.5322 108.854 21.194 109.483 21.6607C110.12 22.1197 110.867 22.3492 111.724 22.3492C112.33 22.3492 112.872 22.2344 113.35 22.0049C113.835 21.7678 114.241 21.4273 114.567 20.9836C114.893 20.5399 115.117 20.0005 115.238 19.3656H119.173C119.075 20.6126 118.711 21.718 118.082 22.682C117.452 23.6383 116.595 24.388 115.511 24.9311C114.427 25.4667 113.153 25.7344 111.689 25.7344Z"
                    fill="white"
                  />
                  <path
                    d="M126.672 15.0623V25.3902H122.554V1.88852H126.581V10.759H126.785C127.195 9.76448 127.828 8.98033 128.685 8.40656C129.549 7.82514 130.649 7.53443 131.983 7.53443C133.196 7.53443 134.254 7.79071 135.157 8.30328C136.059 8.81585 136.756 9.56557 137.249 10.5525C137.75 11.5393 138 12.7443 138 14.1672V25.3902H133.883V14.8098C133.883 13.624 133.579 12.7022 132.973 12.0443C132.374 11.3787 131.532 11.0459 130.448 11.0459C129.72 11.0459 129.068 11.2066 128.491 11.5279C127.923 11.8415 127.475 12.2967 127.149 12.8934C126.831 13.4902 126.672 14.2131 126.672 15.0623Z"
                    fill="white"
                  />
                  <path
                    d="M7.68884 0H14.6792V25.3902H7.68884V0Z"
                    fill="white"
                  />
                  <path d="M0 0L14.6792 0L14.6798 6.86221H0V0Z" fill="white" />
                  <path
                    d="M25.2926 3.4311C25.2926 5.32605 23.7277 6.86221 21.7974 6.86221C19.867 6.86221 18.3022 5.32605 18.3022 3.4311C18.3022 1.53616 19.867 0 21.7974 0C23.7277 0 25.2926 1.53616 25.2926 3.4311Z"
                    fill="#702CDC"
                  />
                </svg>
              ) : (
                <svg
                  width="138"
                  height="31"
                  viewBox="0 0 138 31"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  className="py-1"
                >
                  <path
                    d="M31.3984 14.5916V24.5967H27.281V1.82951H31.3074V10.4228H31.5121C31.9216 9.45934 32.5547 8.69969 33.4116 8.14385C34.276 7.5806 35.3755 7.29897 36.71 7.29897C37.9232 7.29897 38.981 7.54725 39.8833 8.0438C40.7856 8.54035 41.4832 9.26665 41.9761 10.2227C42.4765 11.1787 42.7268 12.346 42.7268 13.7245V24.5967H38.6094V14.347C38.6094 13.1983 38.3061 12.3052 37.6995 11.6679C37.1005 11.0231 36.2588 10.7007 35.1745 10.7007C34.4466 10.7007 33.7945 10.8564 33.2182 11.1676C32.6495 11.4715 32.2021 11.9124 31.8761 12.4905C31.5576 13.0686 31.3984 13.769 31.3984 14.5916Z"
                    fill="black"
                  />
                  <path
                    d="M48.8573 31C48.2962 31 47.7768 30.9555 47.2991 30.8666C46.8289 30.7851 46.4536 30.6887 46.173 30.5776L47.1285 27.4426C47.7275 27.6131 48.262 27.6946 48.7322 27.6872C49.2023 27.6798 49.6155 27.5353 49.9719 27.2536C50.3359 26.9794 50.643 26.5199 50.8932 25.8752L51.2458 24.9525L44.9105 7.52131H49.2781L53.3045 20.4168H53.4864L57.5242 7.52131H61.9031L54.9082 26.6644C54.5821 27.5686 54.1499 28.3431 53.6116 28.9879C53.0732 29.64 52.4135 30.1366 51.6325 30.4775C50.8591 30.8258 49.934 31 48.8573 31Z"
                    fill="black"
                  />
                  <path
                    d="M68.8696 1.82951V24.5967H64.7523V1.82951H68.8696Z"
                    fill="black"
                  />
                  <path
                    d="M81.8273 7.52131V10.634H71.7842V7.52131H81.8273ZM74.2637 3.43033H78.381V19.4608C78.381 20.0018 78.4644 20.4168 78.6312 20.7058C78.8056 20.9875 79.0331 21.1802 79.3137 21.2839C79.5942 21.3877 79.9051 21.4395 80.2463 21.4395C80.5041 21.4395 80.7392 21.421 80.9515 21.384C81.1714 21.3469 81.3382 21.3136 81.452 21.2839L82.1458 24.43C81.9259 24.5041 81.6112 24.5856 81.2017 24.6745C80.7999 24.7635 80.307 24.8153 79.7231 24.8302C78.6919 24.8598 77.763 24.7079 76.9365 24.3744C76.11 24.0335 75.4541 23.5073 74.9688 22.7958C74.4911 22.0843 74.2561 21.195 74.2637 20.1278V3.43033Z"
                    fill="black"
                  />
                  <path
                    d="M92.8173 24.9302C91.0657 24.9302 89.553 24.5745 88.2791 23.863C87.0128 23.1441 86.0385 22.1288 85.356 20.817C84.6736 19.4978 84.3324 17.9452 84.3324 16.1591C84.3324 14.4026 84.6736 12.8611 85.356 11.5345C86.046 10.2005 87.009 9.16289 88.245 8.42177C89.481 7.67324 90.933 7.29897 92.6012 7.29897C93.6779 7.29897 94.694 7.46943 95.6494 7.81035C96.6124 8.14385 97.4616 8.66264 98.1971 9.3667C98.9402 10.0708 99.5241 10.9675 99.9487 12.057C100.373 13.139 100.586 14.4286 100.586 15.9256V17.1596H86.2659V14.4471H96.6389C96.6313 13.6763 96.4607 12.9908 96.1271 12.3905C95.7935 11.7828 95.3271 11.3047 94.7281 10.9564C94.1367 10.6081 93.4466 10.4339 92.6581 10.4339C91.8164 10.4339 91.0771 10.634 90.4402 11.0342C89.8032 11.427 89.3066 11.9458 88.9502 12.5906C88.6014 13.2279 88.4232 13.9283 88.4156 14.6916V17.0595C88.4156 18.0526 88.6014 18.9049 88.9729 19.6164C89.3445 20.3205 89.8639 20.8615 90.5311 21.2394C91.1984 21.61 91.9794 21.7953 92.8742 21.7953C93.4732 21.7953 94.0154 21.7138 94.5006 21.5507C94.9859 21.3803 95.4067 21.132 95.7631 20.8059C96.1195 20.4798 96.3887 20.0759 96.5707 19.5942L100.415 20.0166C100.172 21.0097 99.7099 21.8768 99.0274 22.6179C98.3526 23.3516 97.4882 23.9223 96.4342 24.3299C95.3802 24.7301 94.1746 24.9302 92.8173 24.9302Z"
                    fill="black"
                  />
                  <path
                    d="M111.689 24.9302C109.945 24.9302 108.448 24.556 107.197 23.8074C105.953 23.0589 104.994 22.025 104.319 20.7058C103.652 19.3792 103.318 17.8525 103.318 16.1257C103.318 14.3915 103.659 12.8611 104.342 11.5345C105.024 10.2005 105.987 9.16289 107.231 8.42177C108.482 7.67324 109.961 7.29897 111.667 7.29897C113.085 7.29897 114.34 7.55466 115.431 8.06603C116.531 8.57 117.407 9.28518 118.059 10.2116C118.711 11.1306 119.082 12.2052 119.173 13.4354H115.238C115.079 12.6128 114.7 11.9273 114.101 11.3788C113.509 10.823 112.717 10.5451 111.724 10.5451C110.882 10.5451 110.143 10.7674 109.506 11.2121C108.869 11.6493 108.372 12.2793 108.016 13.1019C107.667 13.9246 107.492 14.9103 107.492 16.059C107.492 17.2226 107.667 18.2231 108.016 19.0606C108.364 19.8906 108.854 20.5317 109.483 20.9838C110.12 21.4284 110.867 21.6508 111.724 21.6508C112.33 21.6508 112.872 21.5396 113.35 21.3173C113.835 21.0875 114.241 20.7577 114.567 20.3279C114.893 19.898 115.117 19.3755 115.238 18.7604H119.173C119.075 19.9684 118.711 21.0393 118.082 21.9732C117.452 22.8996 116.595 23.6259 115.511 24.152C114.427 24.6708 113.153 24.9302 111.689 24.9302Z"
                    fill="black"
                  />
                  <path
                    d="M126.672 14.5916V24.5967H122.554V1.82951H126.581V10.4228H126.785C127.195 9.45934 127.828 8.69969 128.685 8.14385C129.549 7.5806 130.649 7.29897 131.983 7.29897C133.196 7.29897 134.254 7.54725 135.157 8.0438C136.059 8.54035 136.756 9.26665 137.249 10.2227C137.75 11.1787 138 12.346 138 13.7245V24.5967H133.883V14.347C133.883 13.1983 133.579 12.3052 132.973 11.6679C132.374 11.0231 131.532 10.7007 130.448 10.7007C129.72 10.7007 129.068 10.8564 128.491 11.1676C127.923 11.4715 127.475 11.9124 127.149 12.4905C126.831 13.0686 126.672 13.769 126.672 14.5916Z"
                    fill="black"
                  />
                  <path
                    d="M7.68884 0H14.6792V24.5967H7.68884V0Z"
                    fill="black"
                  />
                  <path d="M0 0L14.6792 0L14.6798 6.64776H0V0Z" fill="black" />
                  <path
                    d="M25.2926 3.32388C25.2926 5.15961 23.7277 6.64776 21.7974 6.64776C19.867 6.64776 18.3022 5.15961 18.3022 3.32388C18.3022 1.48815 19.867 0 21.7974 0C23.7277 0 25.2926 1.48815 25.2926 3.32388Z"
                    fill="#702CDC"
                  />
                </svg>
              )}
            </Link>

            {/* Separator */}
            <div className="h-6 w-px bg-border mx-4  hidden md:block" />

            {/* Navigation Links */}
            <nav className="hidden md:flex space-x-2">
              {["Projet", "Équipe", "École", "Planning"].map((item) => (
                <Link
                  key={item}
                  href={`#${item.toLowerCase()}`}
                  className="text-muted-foreground hover:text-foreground px-2 py-2 rounded-md text-sm font-medium transition duration-150 ease-in-out"
                >
                  {item}
                </Link>
              ))}
            </nav>
          </div>

          {/* Theme Toggle, GitHub, and Contact Button */}
          <div className="flex items-center">
            <TooltipProvider>
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="ghost"
                    size="icon"
                    onClick={() =>
                      setTheme(theme === "dark" ? "light" : "dark")
                    }
                    className="text-foreground  items-center"
                  >
                    {mounted &&
                      (theme === "dark" ? (
                        <Sun className="h-5 w-5" />
                      ) : (
                        <Moon className="h-5 w-5" />
                      ))}
                    <span className="sr-only">Changer le thème</span>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Changer le thème</p>
                </TooltipContent>
              </Tooltip>
            </TooltipProvider>

            <TooltipProvider>
              <Tooltip>
                <TooltipTrigger asChild>
                  <Button
                    variant="ghost"
                    size="icon"
                    asChild
                    className="text-foreground  hidden sm:flex items-center"
                  >
                    <Link
                      href="https://github.com/HakimFIDJEL/pfe-website"
                      target="_blank"
                      rel="noopener noreferrer"
                    >
                      <Github className="h-5 w-5" />
                      <span className="sr-only">GitHub</span>
                    </Link>
                  </Button>
                </TooltipTrigger>
                <TooltipContent>
                  <p>Code source</p>
                </TooltipContent>
              </Tooltip>
            </TooltipProvider>

            <div className="h-6 w-px bg-border mx-4  " />
            <Button asChild>
              <Link href="#contact" className="flex items-center gap-2">
                <span className="hidden lg:block">Nous contacter</span>
                <Mail className="h-5 w-5" />
              </Link>
            </Button>
          </div>
        </div>
      </div>
    </header>
  );
}

export default Header;
